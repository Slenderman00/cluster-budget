Proposal Name:
DNS-Based Traffic Steering for IPv6 Enabled Edge Microservices

Abstract: Can you explain the whole project and its expected outcome(s):
This project explores DNS-based traffic steering between IPv6-enabled clients and microservices. This will function as a lightweight open-source alternative
to layer 7 ingress proxies. The work removes traffic steering logic from the application layer by performing metrics-based record management on a dedicated DNS server, eliminating the need for Layer 7 ingress proxies while keeping the L7 and L3 steering entirely transparent to the client application.
In this approach, the DNS server will decide what client is presented what pods based on current cluster metrics. While traffic delivery is handled by conventional layer 3 network infrastructure instead of application-layer proxies.

In a normal layer 7 proxy the first link in the Uniform Resource Locator is usually used to direct the request to a pod of the correct service. What we are proposing is that this should be done trough DNS subdomains using the DNS protocol thus eliminating the need for layer 7 proxies in traffic steering.

Metrics are handled by Prometheus. The DNS server manages pods records by querying prometheus with an arbitrary PromQL query. Based on this simple mechanism the DNS server decides what records should be in the record pool and what records should be removed.
The DNS server will can also be configured to calculate a dynamic TTL based on arbitrary metrics. All record management is done periodically and instead of at record retrieval to keep the server quick and efficient.

A commonly brought up 'Issue' is the issue of DNS caching and recursive resolvers not respecting the Time To Live of records from authorative servers. This issue is tackled trough the proper delegation of DNS records.
By placing our DNS servers in a tree structure where only the bottom layer of servers provide AAAA records while the rest of the servers provide NS records we can make sure records stay fresh and TTL is respected.
However, while proper delegation does eleviate the issue of non compliance a bit especially when it comes to caching duration it will not stop a non-compliant recursive resolver from resolving all NS records until it reaches AAAA records.

This project includes building a small testbed in the form of a 22 node raspberry pi cluster. The cluster will function as an analog for modern server infrastructure, allowing us to evaluate our approach under realistic conditions. Experimental results will compare 
our DNS-based solution to conventional ingress solutions in terms of latency, scalability, resource usage and failover behaviour.
The cluster will be split into three parts 10 client emulators, 10 hosting microservices and DNS servers and 2 that are used for test steering and monitoring. This will allows us to not only verify the performance of our ingress controller but collect
comparable data from other ingress controllers allowing us to validate the viability of this approach. It will also allow us to explore failover mechanisms after both pod and physical node crashes.

As the internet is transitioning over to IPv6 it is important to leave the inherent restrictions imposed upon us in the past, by exploring
new and more efficient traffic steering paradigms. The work we are doing is made possible due to the removal of Network Address Translation as a result of the larger IPv6 address space.
With RFCs like Media over Quic and other distributed solutions built for the next generation of internet services we are in dire need of traffic steering mechanism at the edge that are not introducing choke points in
systems that are perfectly distributable. Media over Quic introduces a concept of replica fanout but, with current content steering practices at the application layer the benefits of Media over Quic would quickly be overshadowed by the limitations and centralizing nature of our layer 7 proxies.

Our expected outcomes are as following:
- An open-source DNS based Kubernetes ingress controller
- One or two Open access articles presenting our results, published and peer reviewed.

Have you been involved with projects or organisations relevant to this project before? And if so, can you tell us a bit about your contributions?
As an independent consultant I have been developing internal control planes for the University of Tromsø in this regard I have several networking related contributions in Network Administration Visualized. I have also partnered with Lightside Instruments developing open-source software for NETCONF based sensor management.

Explain what the requested budget will be used for?
Does the project have other funding sources, both past and present?
A breakdown in the main tasks with associated effort is appreciated. Make rates explicit.
(If you want, you can in addition attach a full budget at the bottom of the form):
The budget will be used to construct a testbed.
The testbed will consist of 22 raspberry pi 5 16gb, 25 256gb microsd cards, A ubiquity USW-Pro-Max-24-PoE (400W)
and 25 raspberry pi 5 PoE cards

Which model did you use? What did you use it for? Please submit the dates of the prompts, the prompts themselves and the unedited output in this text field.
ChatGPT 5.2 with the following prompt: "Proof read this:" was used in order to catch spelling mistakes and difficult to read sentences

new abstract:
This project explores DNS-based traffic steering between IPv6-enabled clients and microservices. The project will function as a lightweight open-source alternative to L7 ingress proxies. The work removes traffic steering logic from the application layer by performing metrics-based record management on a dedicated DNS server. In this approach, the DNS server will decide which client is presented with which pods based on current cluster metrics, while traffic delivery is handled by conventional L3 network infrastructure instead of application-layer proxies. In a normal L7 proxy, the first link in the URL is usually used to direct the request to a pod of the correct service. What we are proposing is that this should be done through DNS subdomains using the DNS protocol, thus eliminating the need for L7 proxies in traffic steering. DNS-based traffic steering will allow for a larger traffic fanout for distributed systems without introducing chokepoints like those caused by L7 proxies.

Therefore, we are building a small testbed consisting of 22 Raspberry Pis, as this is a realistic analog to modern server infrastructure. The cluster will be split into groups of two, 10 client emulators and 10 hosting the Kubernetes cluster.

Our expected outcomes are as follows:
- An open-source DNS-based Kubernetes ingress controller
- One or two open-access articles presenting our results, published and peer-reviewed

new budget:
All costs are related to the Raspberry Pi cluster testbed.
there are no other funding sources for this project.

The budget will be used to acquire the following:
- 22 Raspberry Pi 5 (16 GB)
- 25 × 256 GB microSD cards
- 1 Ubiquiti USW-Pro-Max-24-PoE (400 W)
- 25 Raspberry Pi PoE shields
A cleaner breakdown of the budget has been appended to the application.

Compare your own project to historical efforts:
None of the underlying technologies used in this project are new. DNS has long supported multi-record resolution, and the dynamic management of resource records based on external metrics has been explored in prior work.

What differentiates this project from its predecessors is not the invention of new mechanisms but the use of DNS as the primary steering mechanism at the ingress level. Existing DNS-based steering approaches are typically used in a complementary role alongside L7 proxies, for example by large CDNs which use DNS to reduce latency and lower load on their ingress proxies by spreading the work over multiple server locations. 

This project sees DNS-based steering as a direct alternative to L7 ingress proxies, with record pools actively managed based on pod metrics. 

What are significant technical challenges you expect to solve during the project, if any?
The main issues for this iteration of the project will be to create or explore algorithms for the efficient selection of resource records across the record pool. Looking at different ways of specifying metric thresholds as criteria for a pod being in the record pool, for example average or absolute thresholds. We aim to collect data on existing Kubernetes ingress controllers to prove the viability of our approach.

We will also look at how commonly mentioned issues with non compliant recursive resolvers not respecting DNS caching can be solved through delegation of DNS records between multiple servers through the use of NS records.

Describe the ecosystem of the project, and how you will engage with relevant actors and promote the outcomes?
The primary target for this project consists of Kubernetes users, infrastructure engineers, and developers working on IPv6-enabled distributed systems. Engagement will focus on releasing our DNS-based ingress controller as open-source software, accompanied by quantitative evaluation data comparing our solution with existing approaches. We will also reach out to developers working on related open-source standards and systems, such as implementations of Media over QUIC, to explore potential collaboration.


